@using Unikktle.Common
@using Microsoft.AspNetCore.Http
@using Microsoft.AspNetCore.Mvc.Localization
@inject IViewLocalizer Localizer
@model Unikktle.Models.SearchViewModel


<div class="pt">
    <div class="Fx5 ch">
        @*<script src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>*@

        @if (Model.KeywordList.Count() < 1)
        {
            @* {0}を含むキーワードは見つかりませんでした。 *@
            <h3>@Localizer["2", Context.Session.GetString(SessionKey.UserSearchString)]</h3>

            <p><br></p>
            <button class="btn btn-primary sample4" onclick="ClickExternalSearch('@Model.ExternalSearch.URL')">@Model.ExternalSearch.Name</button>
        }
        else
        {
            @* {0}を含むキーワード *@
            <div class="cs">
                <h3>@Localizer["1", Context.Session.GetString(SessionKey.UserSearchString)]</h3>
            </div>
            <p></p>

            <div id="s">
                <div>
                    @if (Model.AdverSelectPrSearch == null)
                    {
                        @* 該当する広告が0件の場合はgoogleの広告を表示する *@
                        <div>
                            @*<ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-0280624850830583" data-ad-slot="1393483003" data-ad-format="auto" data-full-width-responsive="true"></ins>
                            <script>(adsbygoogle = window.adsbygoogle || []).push({});</script>*@
                        </div>
                    }
                    else
                    {
                        <div>
                            @* href="#"を削除するとリンクで表示されない。必要。 *@
                                <a href="#" onclick="ClickPrSearch('@Model.AdverSelectPrSearch.AdverURL', @Model.AdverSelectPrSearch.UserNo, @Model.AdverSelectPrSearch.BusinessNo, @Model.AdverSelectPrSearch.AdverNo, @Model.SearchWordId);return false;">
                                    [PR] @Model.AdverSelectPrSearch.AdverTitle1<br>
                                    @Model.AdverSelectPrSearch.AdverTitle2
                                </a>
                        </div>
                    }
                </div>
                <p></p>
                <table class="Fx5 table">
                    <tbody>
                        @foreach (var item in Model.KeywordList)
                        {
                            <tr>
                                <td>
                                    @*<a asp-action="WordMap" asp-route-id="@item.Id" asp-route-pageNum="0">@Html.DisplayFor(modelItem => item.Word)</a>*@
                                    <a asp-action="WordMap" asp-route-i="@item.Id">@Html.DisplayFor(modelItem => item.Word)</a>
                                </td>
                            </tr>
                        }
                    </tbody>
                </table>
            </div>

            @if (Model.NextAvailable)
            {
                <button id="ViewNext" class="btn btn-primary sample4" onclick="ClickNextSearch()">View next 30</button>
            }

            @*
            <script type="text/javascript">

                $(function () {
                    sessionStorage.setItem("pageNum", 1);
                });

            </script>

            <partial name="/JavaScript/ClickPrSearch.cshtml" />
            <partial name="/JavaScript/ClickNext.cshtml" />
            *@

        }
    </div>

    @*<div style="background-color:#DEE2E6; width:2px"></div>*@

    <div class="Fx5 ch2">
        <div class="chb">
            @*<script src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>*@

            @if (Model.MindSearchViewModel.MindList.Count() < 1)
            {
                <div class="pt">
                    <div class="Fx5 ci">
                        @* {0}を含むMindは見つかりませんでした。 *@
                        <h3>@Localizer["4", Context.Session.GetString(SessionKey.UserSearchString)]</h3>
                    </div>
                    <partial name="_Search_NewButton" />
                </div>

                <p><br></p>
                <button class="btn btn-primary sample4" onclick="ClickExternalSearch('@Model.MindSearchViewModel.ExternalSearch.URL')">@Model.MindSearchViewModel.ExternalSearch.Name</button>
            }
            else
            {
                <div class="pt">
                    <div class="ci">
                        @* {0}を含むMind *@
                        <h3>@Localizer["3", Context.Session.GetString(SessionKey.UserSearchString)]</h3>
                    </div>
                    <partial name="_Search_NewButton" />
                </div>
                <p></p>

                <div id="s">
                    <table class="Fx5 table">
                        <tbody>
                            @foreach (var item in Model.MindSearchViewModel.MindList)
                            {
                                <tr>
                                    <td>
                                        <form method="post">
                                            @*<a asp-action="WordMap" asp-route-id="@item.Id" asp-route-pageNum="0">@Html.DisplayFor(modelItem => item.Word)</a>*@
                                            <a asp-page="/Mind/Mind" asp-route-i="@item.Id">@item.Title</a>
                                        </form>
                                        <p class="ms1">@item.Explanation</p>
                                        <p>@item.LastUpdate</p>
                                    </td>
                                </tr>
                            }
                        </tbody>
                    </table>
                </div>

                @if (Model.MindSearchViewModel.NextAvailable)
                {
                    <button id="ViewNext" class="btn btn-primary sample4" onclick="ClickNextSearch()">View next 30</button>
                }

                @*
                <script type="text/javascript">

                    $(function () {
                        sessionStorage.setItem("pageNum", 1);
                    });

                </script>

                <partial name="/JavaScript/ClickPrSearch.cshtml" />
                <partial name="/JavaScript/ClickNext.cshtml" />
                *@

            }
        </div>

        @*<hr>*@

    </div>
</div>

<environment include="Development">
    <script src="/js/ClickPrSearch.js" asp-append-version="true"></script>
    <script src="/js/ClickNextSearch.js" asp-append-version="true"></script>
    <script src="/js/Page_Search.js" asp-append-version="true"></script>
</environment>
<environment exclude="Development">
    @* デプロイ時に全jsファイルは site.min.js に纏められる。
        <script src="/js/ClickPrSearch.min.js" asp-append-version="true"></script>
        <script src="/js/ClickNext.min.js" asp-append-version="true"></script>
    *@
    <script src="/js/Page_Search.min.js" asp-append-version="true"></script>
</environment>

